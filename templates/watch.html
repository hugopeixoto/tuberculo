{% extends "application.html" %}
{% block body %}
{% include "watch.fragment.html" %}
<script>
    document.body.addEventListener("htmx:beforeSwap", function (ev) {
        let video = ev.target.querySelector("video");
        video.pause();
        video.querySelectorAll("source").forEach((source) => {
            source.remove();
        });
        video.load();
    });
</script>
{% endblock %}
